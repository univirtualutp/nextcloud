/*! third party licenses: js/vendor.LICENSE.txt */
var ae=Object.defineProperty;var Ee=(r,e,t)=>e in r?ae(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var y=(r,e,t)=>(Ee(r,typeof e!="symbol"?e+"":e,t),t);import{g as V}from"./_commonjsHelpers.chunk.mjs";function ce(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var H={exports:{}},E=H.exports={},u,I;function P(){throw new Error("setTimeout has not been defined")}function F(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?u=setTimeout:u=P}catch{u=P}try{typeof clearTimeout=="function"?I=clearTimeout:I=F}catch{I=F}})();function W(r){if(u===setTimeout)return setTimeout(r,0);if((u===P||!u)&&setTimeout)return u=setTimeout,setTimeout(r,0);try{return u(r,0)}catch{try{return u.call(null,r,0)}catch{return u.call(this,r,0)}}}function le(r){if(I===clearTimeout)return clearTimeout(r);if((I===F||!I)&&clearTimeout)return I=clearTimeout,clearTimeout(r);try{return I(r)}catch{try{return I.call(null,r)}catch{return I.call(this,r)}}}var R=[],O=!1,L,w=-1;function he(){!O||!L||(O=!1,L.length?R=L.concat(R):w=-1,R.length&&z())}function z(){if(!O){var r=W(he);O=!0;for(var e=R.length;e;){for(L=R,R=[];++w<e;)L&&L[w].run();w=-1,e=R.length}L=null,O=!1,le(r)}}E.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];R.push(new Y(r,e)),R.length===1&&!O&&W(z)};function Y(r,e){this.fun=r,this.array=e}Y.prototype.run=function(){this.fun.apply(null,this.array)},E.title="browser",E.browser=!0,E.env={},E.argv=[],E.version="",E.versions={};function f(){}E.on=f,E.addListener=f,E.once=f,E.off=f,E.removeListener=f,E.removeAllListeners=f,E.emit=f,E.prependListener=f,E.prependOnceListener=f,E.listeners=function(r){return[]},E.binding=function(r){throw new Error("process.binding is not supported")},E.cwd=function(){return"/"},E.chdir=function(r){throw new Error("process.chdir is not supported")},E.umask=function(){return 0};var ue=H.exports;const Ie=ce(ue);var D={};const pe=typeof Ie=="object"&&D&&D.NODE_DEBUG&&/\bsemver\b/i.test(D.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};var Z=pe;const fe="2.0.0",q=256,Re=Number.MAX_SAFE_INTEGER||9007199254740991,Le=16,de=q-6,Ne=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var J={MAX_LENGTH:q,MAX_SAFE_COMPONENT_LENGTH:Le,MAX_SAFE_BUILD_LENGTH:de,MAX_SAFE_INTEGER:Re,RELEASE_TYPES:Ne,SEMVER_SPEC_VERSION:fe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},C={exports:{}};(function(r,e){const{MAX_SAFE_COMPONENT_LENGTH:t,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:a}=J,l=Z;e=r.exports={};const te=e.re=[],re=e.safeRe=[],n=e.src=[],s=e.t={};let ne=0;const S="[a-zA-Z0-9-]",se=[["\\s",1],["\\d",a],[S,i]],ie=d=>{for(const[p,v]of se)d=d.split("".concat(p,"*")).join("".concat(p,"{0,").concat(v,"}")).split("".concat(p,"+")).join("".concat(p,"{1,").concat(v,"}"));return d},o=(d,p,v)=>{const oe=ie(p),T=ne++;l(d,T,p),s[d]=T,n[T]=p,te[T]=new RegExp(p,v?"g":void 0),re[T]=new RegExp(oe,v?"g":void 0)};o("NUMERICIDENTIFIER","0|[1-9]\\d*"),o("NUMERICIDENTIFIERLOOSE","\\d+"),o("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-]".concat(S,"*")),o("MAINVERSION","(".concat(n[s.NUMERICIDENTIFIER],")\\.(").concat(n[s.NUMERICIDENTIFIER],")\\.(").concat(n[s.NUMERICIDENTIFIER],")")),o("MAINVERSIONLOOSE","(".concat(n[s.NUMERICIDENTIFIERLOOSE],")\\.(").concat(n[s.NUMERICIDENTIFIERLOOSE],")\\.(").concat(n[s.NUMERICIDENTIFIERLOOSE],")")),o("PRERELEASEIDENTIFIER","(?:".concat(n[s.NUMERICIDENTIFIER],"|").concat(n[s.NONNUMERICIDENTIFIER],")")),o("PRERELEASEIDENTIFIERLOOSE","(?:".concat(n[s.NUMERICIDENTIFIERLOOSE],"|").concat(n[s.NONNUMERICIDENTIFIER],")")),o("PRERELEASE","(?:-(".concat(n[s.PRERELEASEIDENTIFIER],"(?:\\.").concat(n[s.PRERELEASEIDENTIFIER],")*))")),o("PRERELEASELOOSE","(?:-?(".concat(n[s.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(n[s.PRERELEASEIDENTIFIERLOOSE],")*))")),o("BUILDIDENTIFIER","".concat(S,"+")),o("BUILD","(?:\\+(".concat(n[s.BUILDIDENTIFIER],"(?:\\.").concat(n[s.BUILDIDENTIFIER],")*))")),o("FULLPLAIN","v?".concat(n[s.MAINVERSION]).concat(n[s.PRERELEASE],"?").concat(n[s.BUILD],"?")),o("FULL","^".concat(n[s.FULLPLAIN],"$")),o("LOOSEPLAIN","[v=\\s]*".concat(n[s.MAINVERSIONLOOSE]).concat(n[s.PRERELEASELOOSE],"?").concat(n[s.BUILD],"?")),o("LOOSE","^".concat(n[s.LOOSEPLAIN],"$")),o("GTLT","((?:<|>)?=?)"),o("XRANGEIDENTIFIERLOOSE","".concat(n[s.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),o("XRANGEIDENTIFIER","".concat(n[s.NUMERICIDENTIFIER],"|x|X|\\*")),o("XRANGEPLAIN","[v=\\s]*(".concat(n[s.XRANGEIDENTIFIER],")(?:\\.(").concat(n[s.XRANGEIDENTIFIER],")(?:\\.(").concat(n[s.XRANGEIDENTIFIER],")(?:").concat(n[s.PRERELEASE],")?").concat(n[s.BUILD],"?)?)?")),o("XRANGEPLAINLOOSE","[v=\\s]*(".concat(n[s.XRANGEIDENTIFIERLOOSE],")(?:\\.(").concat(n[s.XRANGEIDENTIFIERLOOSE],")(?:\\.(").concat(n[s.XRANGEIDENTIFIERLOOSE],")(?:").concat(n[s.PRERELEASELOOSE],")?").concat(n[s.BUILD],"?)?)?")),o("XRANGE","^".concat(n[s.GTLT],"\\s*").concat(n[s.XRANGEPLAIN],"$")),o("XRANGELOOSE","^".concat(n[s.GTLT],"\\s*").concat(n[s.XRANGEPLAINLOOSE],"$")),o("COERCEPLAIN","(^|[^\\d])(\\d{1,".concat(t,"})(?:\\.(\\d{1,").concat(t,"}))?(?:\\.(\\d{1,").concat(t,"}))?")),o("COERCE","".concat(n[s.COERCEPLAIN],"(?:$|[^\\d])")),o("COERCEFULL",n[s.COERCEPLAIN]+"(?:".concat(n[s.PRERELEASE],")?(?:").concat(n[s.BUILD],")?(?:$|[^\\d])")),o("COERCERTL",n[s.COERCE],!0),o("COERCERTLFULL",n[s.COERCEFULL],!0),o("LONETILDE","(?:~>?)"),o("TILDETRIM","(\\s*)".concat(n[s.LONETILDE],"\\s+"),!0),e.tildeTrimReplace="$1~",o("TILDE","^".concat(n[s.LONETILDE]).concat(n[s.XRANGEPLAIN],"$")),o("TILDELOOSE","^".concat(n[s.LONETILDE]).concat(n[s.XRANGEPLAINLOOSE],"$")),o("LONECARET","(?:\\^)"),o("CARETTRIM","(\\s*)".concat(n[s.LONECARET],"\\s+"),!0),e.caretTrimReplace="$1^",o("CARET","^".concat(n[s.LONECARET]).concat(n[s.XRANGEPLAIN],"$")),o("CARETLOOSE","^".concat(n[s.LONECARET]).concat(n[s.XRANGEPLAINLOOSE],"$")),o("COMPARATORLOOSE","^".concat(n[s.GTLT],"\\s*(").concat(n[s.LOOSEPLAIN],")$|^$")),o("COMPARATOR","^".concat(n[s.GTLT],"\\s*(").concat(n[s.FULLPLAIN],")$|^$")),o("COMPARATORTRIM","(\\s*)".concat(n[s.GTLT],"\\s*(").concat(n[s.LOOSEPLAIN],"|").concat(n[s.XRANGEPLAIN],")"),!0),e.comparatorTrimReplace="$1$2$3",o("HYPHENRANGE","^\\s*(".concat(n[s.XRANGEPLAIN],")\\s+-\\s+(").concat(n[s.XRANGEPLAIN],")\\s*$")),o("HYPHENRANGELOOSE","^\\s*(".concat(n[s.XRANGEPLAINLOOSE],")\\s+-\\s+(").concat(n[s.XRANGEPLAINLOOSE],")\\s*$")),o("STAR","(<|>)?=?\\s*\\*"),o("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),o("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(C,C.exports);var me=C.exports;const Oe=Object.freeze({loose:!0}),ve=Object.freeze({}),Te=r=>r?typeof r!="object"?Oe:r:ve;var Ae=Te;const G=/^[0-9]+$/,K=(r,e)=>{const t=G.test(r),i=G.test(e);return t&&i&&(r=+r,e=+e),r===e?0:t&&!i?-1:i&&!t?1:r<e?-1:1},$e=(r,e)=>K(e,r);var ge={compareIdentifiers:K,rcompareIdentifiers:$e};const g=Z,{MAX_LENGTH:_,MAX_SAFE_INTEGER:b}=J,{safeRe:U,t:x}=me,be=Ae,{compareIdentifiers:N}=ge;let we=class h{constructor(e,t){if(t=be(t),e instanceof h){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError('Invalid version. Must be a string. Got type "'.concat(typeof e,'".'));if(e.length>_)throw new TypeError("version is longer than ".concat(_," characters"));g("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const i=e.trim().match(t.loose?U[x.LOOSE]:U[x.FULL]);if(!i)throw new TypeError("Invalid Version: ".concat(e));if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>b||this.major<0)throw new TypeError("Invalid major version");if(this.minor>b||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>b||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){const l=+a;if(l>=0&&l<b)return l}return a}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(e){if(g("SemVer.compare",this.version,this.options,e),!(e instanceof h)){if(typeof e=="string"&&e===this.version)return 0;e=new h(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof h||(e=new h(e,this.options)),N(this.major,e.major)||N(this.minor,e.minor)||N(this.patch,e.patch)}comparePre(e){if(e instanceof h||(e=new h(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const i=this.prerelease[t],a=e.prerelease[t];if(g("prerelease compare",t,i,a),i===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(i===void 0)return-1;if(i!==a)return N(i,a)}while(++t)}compareBuild(e){e instanceof h||(e=new h(e,this.options));let t=0;do{const i=this.build[t],a=e.build[t];if(g("prerelease compare",t,i,a),i===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(i===void 0)return-1;if(i!==a)return N(i,a)}while(++t)}inc(e,t,i){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,i),this.inc("pre",t,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,i),this.inc("pre",t,i);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const a=Number(i)?1:0;if(!t&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[a];else{let l=this.prerelease.length;for(;--l>=0;)typeof this.prerelease[l]=="number"&&(this.prerelease[l]++,l=-2);if(l===-1){if(t===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(t){let l=[t,a];i===!1&&(l=[t]),N(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=l):this.prerelease=l}break}default:throw new Error("invalid increment argument: ".concat(e))}return this.raw=this.format(),this.build.length&&(this.raw+="+".concat(this.build.join("."))),this}};var Q=we;const X=Q,Se=(r,e,t=!1)=>{if(r instanceof X)return r;try{return new X(r,e)}catch(i){if(!t)return null;throw i}};var ye=Se;const De=ye,Pe=(r,e)=>{const t=De(r,e);return t?t.version:null};var Fe=Pe;const Ce=V(Fe),Me=Q,Ge=(r,e)=>new Me(r,e).major;var _e=Ge;const j=V(_e);class Ue{constructor(e){y(this,"bus");typeof e.getVersion!="function"||!Ce(e.getVersion())?console.warn("Proxying an event bus with an unknown or invalid version"):j(e.getVersion())!==j(this.getVersion())&&console.warn("Proxying an event bus of version "+e.getVersion()+" with "+this.getVersion()),this.bus=e}getVersion(){return"3.2.0"}subscribe(e,t){this.bus.subscribe(e,t)}unsubscribe(e,t){this.bus.unsubscribe(e,t)}emit(e,t){this.bus.emit(e,t)}}class xe{constructor(){y(this,"handlers",new Map)}getVersion(){return"3.2.0"}subscribe(e,t){this.handlers.set(e,(this.handlers.get(e)||[]).concat(t))}unsubscribe(e,t){this.handlers.set(e,(this.handlers.get(e)||[]).filter(i=>i!=t))}emit(e,t){(this.handlers.get(e)||[]).forEach(i=>{try{i(t)}catch(a){console.error("could not invoke event listener",a)}})}}let A=null;function M(){return A!==null?A:typeof window>"u"?new Proxy({},{get:()=>()=>console.error("Window not available, EventBus can not be established!")}):(typeof window.OC<"u"&&window.OC._eventBus&&typeof window._nc_event_bus>"u"&&(console.warn("found old event bus instance at OC._eventBus. Update your version!"),window._nc_event_bus=window.OC._eventBus),typeof(window==null?void 0:window._nc_event_bus)<"u"?A=new Ue(window._nc_event_bus):A=window._nc_event_bus=new xe,A)}function Xe(r,e){M().subscribe(r,e)}function Qe(r,e){M().unsubscribe(r,e)}function et(r,e){M().emit(r,e)}let $;const ee=[];function tt(){if($===void 0){const r=document==null?void 0:document.getElementsByTagName("head")[0];$=r?r.getAttribute("data-requesttoken"):null}return $}function rt(r){ee.push(r)}Xe("csrf-token-update",r=>{$=r.token,ee.forEach(e=>{try{e($)}catch(t){console.error("error updating CSRF token observer",t)}})});let m;const k=(r,e)=>r?r.getAttribute(e):null;function je(){if(m!==void 0)return m;const r=document==null?void 0:document.getElementsByTagName("head")[0];if(!r)return null;const e=k(r,"data-user");return e===null?(m=null,m):(m={uid:e,displayName:k(r,"data-user-displayname"),isAdmin:!!window._oc_isadmin},m)}var c=(r=>(r[r.Debug=0]="Debug",r[r.Info=1]="Info",r[r.Warn=2]="Warn",r[r.Error=3]="Error",r[r.Fatal=4]="Fatal",r))(c||{}),ke=Object.defineProperty,Be=(r,e,t)=>e in r?ke(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ve=(r,e,t)=>(Be(r,typeof e!="symbol"?e+"":e,t),t);class He{constructor(e){Ve(this,"context"),this.context=e||{}}formatMessage(e,t,i){let a="["+c[t].toUpperCase()+"] ";return i&&i.app&&(a+=i.app+": "),typeof e=="string"?a+e:(a+="Unexpected ".concat(e.name),e.message&&(a+=' "'.concat(e.message,'"')),t===c.Debug&&e.stack&&(a+="\n\nStack trace:\n".concat(e.stack)),a)}log(e,t,i){var a,l;if(!(typeof((a=this.context)==null?void 0:a.level)=="number"&&e<((l=this.context)==null?void 0:l.level)))switch(typeof t=="object"&&(i==null?void 0:i.error)===void 0&&(i.error=t),e){case c.Debug:console.debug(this.formatMessage(t,c.Debug,i),i);break;case c.Info:console.info(this.formatMessage(t,c.Info,i),i);break;case c.Warn:console.warn(this.formatMessage(t,c.Warn,i),i);break;case c.Error:console.error(this.formatMessage(t,c.Error,i),i);break;case c.Fatal:default:console.error(this.formatMessage(t,c.Fatal,i),i);break}}debug(e,t){this.log(c.Debug,e,Object.assign({},this.context,t))}info(e,t){this.log(c.Info,e,Object.assign({},this.context,t))}warn(e,t){this.log(c.Warn,e,Object.assign({},this.context,t))}error(e,t){this.log(c.Error,e,Object.assign({},this.context,t))}fatal(e,t){this.log(c.Fatal,e,Object.assign({},this.context,t))}}function We(r){return new He(r)}var ze=Object.defineProperty,Ye=(r,e,t)=>e in r?ze(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,B=(r,e,t)=>(Ye(r,typeof e!="symbol"?e+"":e,t),t);class Ze{constructor(e){B(this,"context"),B(this,"factory"),this.context={},this.factory=e}setApp(e){return this.context.app=e,this}setLogLevel(e){return this.context.level=e,this}setUid(e){return this.context.uid=e,this}detectUser(){const e=je();return e!==null&&(this.context.uid=e.uid),this}detectLogLevel(){const e=this,t=()=>{var i,a;document.readyState==="complete"||document.readyState==="interactive"?(e.context.level=(a=(i=window._oc_config)==null?void 0:i.loglevel)!=null?a:c.Warn,window._oc_debug&&(e.context.level=c.Debug),document.removeEventListener("readystatechange",t)):document.addEventListener("readystatechange",t)};return t(),this}build(){return this.context.level===void 0&&this.detectLogLevel(),this.factory(this.context)}}function qe(){return new Ze(We)}const nt=qe().setApp("activity").detectUser().build();export{je as a,rt as c,tt as d,et as e,nt as l,Ie as p,Xe as s,Qe as u};
